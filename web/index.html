<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWARM COMMAND - Tactical Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { font-family: Arial, sans-serif; background: #000; overflow: hidden; }
        #map { width: 100vw; height: 100vh; }
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: linear-gradient(180deg, rgba(0,20,40,0.95) 0%, rgba(0,20,40,0.7) 100%);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            border-bottom: 1px solid rgba(0,240,255,0.3);
        }

        .logo {
            font-family: Arial Black, sans-serif;
            font-size: 14px;
            color: #00f0ff;
            letter-spacing: 3px;
        }

        .btn-group { display: flex; gap: 5px; }

        .btn {
            padding: 6px 12px;
            border: 1px solid rgba(0,240,255,0.5);
            background: rgba(0,40,60,0.9);
            color: #00f0ff;
            cursor: pointer;
            font-size: 11px;
            text-transform: uppercase;
            transition: all 0.2s;
        }

        .btn:hover { background: rgba(0,240,255,0.3); }
        .btn.active { background: #00f0ff; color: #000; }
        .btn.red { border-color: rgba(255,50,50,0.5); color: #ff3232; }
        .btn.red:hover, .btn.red.active { background: #ff3232; color: #fff; }

        .panel {
            position: fixed;
            left: 10px;
            top: 60px;
            width: 150px;
            background: rgba(0,20,40,0.95);
            border: 1px solid rgba(0,240,255,0.3);
            z-index: 1000;
            padding: 10px;
        }

        .panel-title {
            font-size: 9px;
            color: #00f0ff;
            border-bottom: 1px solid rgba(0,240,255,0.3: 5px;
            margin-bottom);
            padding-bottom: 8px;
            letter-spacing: 1px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 11px;
        }

        .stat-label { color: #778899; }
        .stat-value { font-weight: bold; }
        .drone { color: #ff9500; }
        .pod { color: #00bfff; }
        .bot { color: #32cd32; }
        .target { color: #ff3232; }

        .right-panel {
            position: fixed;
            right: 10px;
            top: 60px;
            width: 160px;
            background: rgba(0,20,40,0.95);
            border: 1px solid rgba(255,50,50,0.4);
            z-index: 1000;
            padding: 10px;
        }

        .target-label {
            font-size: 9px;
            background: #ff3232;
            color: #000;
            padding: 2px 6px;
            display: inline-block;
            margin-bottom: 5px;
        }

        .target-name { color: #ff3232; font-size: 14px; margin-bottom: 8px; }
        
        .health-bar {
            height: 4px;
            background: rgba(255,50,50,0.2);
            margin-top: 8px;
        }
        .health-fill {
            height: 100%;
            background: #ff3232;
            width: 100%;
        }

        .attack-btn {
            position: fixed;
            right: 20px;
            bottom: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,50,50,0.4) 0%, rgba(255,50,50,0.1) 100%);
            border: 3px solid #ff3232;
            color: #ff3232;
            font-size: 10px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .attack-btn:hover { background: #ff3232; color: #fff; }
        .attack-btn span { font-size: 18px; }

        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,15,30,0.9);
            padding: 10px;
            display: flex;
            justify-content: center;
            gap: 40px;
            z-index: 1000;
        }

        .info-item { text-align: center; }
        .info-label { font-size: 8px; color: #556677; }
        .info-value { font-size: 14px; font-weight: bold; }
        .cyan { color: #00f0ff; }
        .orange { color: #ff9500; }
        .green { color: #32cd32; }

        .coords {
            position: fixed;
            bottom: 60px;
            left: 10px;
            background: rgba(0,20,40,0.9);
            border: 1px solid rgba(0,240,255,0.3);
            padding: 5px 10px;
            font-size: 10px;
            color: #00f0ff;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <div class="header">
        <div class="logo">◈ SWARM COMMAND</div>
        <div class="btn-group">
            <button class="btn active" id="btn-india">INDIA</button>
            <button class="btn" id="btn-ocean">INDIAN OCEAN</button>
        </div>
    </div>

    <div class="panel">
        <div class="panel-title">ASSETS</div>
        <div class="stat-row"><span class="stat-label">DRONES</span><span class="stat-value drone" id="drone-count">0</span></div>
        <div class="stat-row"><span class="stat-label">PODS</span><span class="stat-value pod" id="pod-count">0</span></div>
        <div class="stat-row"><span class="stat-label">BOTS</span><span class="stat-value bot" id="bot-count">0</span></div>
        <div class="stat-row"><span class="stat-label">TARGETS</span><span class="stat-value target" id="target-count">0</span></div>
    </div>

    <div class="right-panel">
        <div class="panel-title">TARGET</div>
        <div class="target-label">LOCKED</div>
        <div class="target-name" id="target-name">HOSTILE-1</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:5px;font-size:10px;">
            <div><span style="color:#667">DIST</span><br><span class="target" id="target-dist">2km</span></div>
            <div><span style="color:#667">BEARING</span><br><span class="target" id="target-bearing">127°</span></div>
        </div>
        <div class="health-bar"><div class="health-fill" id="health-fill"></div></div>
    </div>

    <div class="coords" id="coords">LAT: 23.0°N | LON: 78.0°E</div>

    <button class="attack-btn" id="attack-btn"><span>⚡</span>ATTACK</button>

    <div class="bottom-bar">
        <div class="info-item"><div class="info-label">SYSTEM</div><div class="info-value cyan">ONLINE</div></div>
        <div class="info-item"><div class="info-label">FPS</div><div class="info-value orange" id="fps">60</div></div>
        <div class="info-item"><div class="info-label">UNITS</div><div class="info-value green" id="units">0</div></div>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Check Leaflet
        if (typeof L === 'undefined') {
            document.getElementById('map').innerHTML = '<div style="padding:50px;color:#ff3232;font-size:20px;">ERROR: Leaflet failed to load. Check internet connection.</div>';
            throw new Error('Leaflet not loaded');
        }

        // Initialize map
        var map = L.map('map', { zoomControl: true }).setView([23, 78], 5);

        // Add tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap',
            maxZoom: 18
        }).addTo(map);

        // Data
        var markers = [];
        var targets = [];
        var currentRegion = 'india';
        var targetHealth = 100;

        var REGION_DATA = {
            india: {
                center: [23, 78],
                zoom: 5,
                cities: [
                    {name: 'DELHI', lat: 28.61, lon: 77.21},
                    {name: 'MUMBAI', lat: 19.08, lon: 72.88},
                    {name: 'CHENNAI', lat: 13.08, lon: 80.27},
                    {name: 'KOLKATA', lat: 22.57, lon: 88.36},
                    {name: 'BANGALORE', lat: 12.97, lon: 77.59},
                ],
                ports: [
                    {name: 'MUMBAI PORT', lat: 18.95, lon: 72.82},
                    {name: 'CHENNAI PORT', lat: 13.1, lon: 80.3},
                ],
                bots: [
                    {lat: 28.6, lon: 77.2}, {lat: 22.5, lon: 88.3}, {lat: 19.0, lon: 72.8},
                    {lat: 13.0, lon: 80.2}, {lat: 12.9, lon: 77.5}, {lat: 17.4, lon: 78.4},
                ],
                drones: [
                    {lat: 25.0, lon: 78.0}, {lat: 21.0, lon: 82.0}, {lat: 15.0, lon: 75.0},
                ],
                targets: [
                    {lat: 22.0, lon: 85.0, name: 'HOSTILE-1'},
                    {lat: 24.5, lon: 75.0, name: 'HOSTILE-2'},
                ]
            },
            ocean: {
                center: [0, 75],
                zoom: 4,
                ports: [
                    {name: 'MUMBAI', lat: 18.95, lon: 72.82},
                    {name: 'COLOMBO', lat: 6.93, lon: 79.85},
                    {name: 'SINGAPORE', lat: 1.29, lon: 103.85},
                    {name: 'SUEZ', lat: 30.0, lon: 32.5},
                    {name: 'MALE', lat: 4.17, lon: 73.5},
                    {name: 'MOMBASA', lat: -4.04, lon: 39.67},
                ],
                pods: [
                    {lat: 20, lon: 68}, {lat: 18, lon: 70}, {lat: 16, lon: 72}, {lat: 14, lon: 68},
                    {lat: 12, lon: 65}, {lat: 24, lon: 60}, {lat: 22.5, lon: 58}, {lat: 25, lon: 56},
                    {lat: 10, lon: 72}, {lat: 8, lon: 73}, {lat: 12, lon: 74},
                    {lat: 18, lon: 88}, {lat: 15, lon: 90}, {lat: 12, lon: 92},
                    {lat: 7, lon: 80}, {lat: 5, lon: 78}, {lat: 8, lon: 82},
                    {lat: 3, lon: 72}, {lat: 0, lon: 73}, {lat: -2, lon: 71},
                    {lat: -5, lon: 80}, {lat: -8, lon: 85}, {lat: -10, lon: 90},
                    {lat: -15, lon: 85}, {lat: -20, lon: 80},
                    {lat: -8, lon: 100}, {lat: -5, lon: 105}, {lat: -10, lon: 110},
                    {lat: -20, lon: 115}, {lat: -25, lon: 110},
                    {lat: -18, lon: 42}, {lat: -20, lon: 45}, {lat: -22, lon: 50},
                    {lat: -18, lon: 50}, {lat: -25, lon: 55},
                ],
                drones: [
                    {lat: 15, lon: 72}, {lat: 10, lon: 75}, {lat: 5, lon: 80},
                    {lat: 0, lon: 85}, {lat: -10, lon: 80}, {lat: -15, lon: 90},
                ],
                targets: [
                    {lat: 10, lon: 70, name: 'VESSEL-1'},
                    {lat: -5, lon: 85, name: 'VESSEL-2'},
                    {lat: -15, lon: 95, name: 'VESSEL-3'},
                ]
            }
        };

        function createIcon(color, size) {
            return L.divIcon({
                className: '',
                html: '<div style="width:'+size+'px;height:'+size+'px;background:'+color+';border-radius:50%;box-shadow:0 0 '+size+'px '+color+';"></div>',
                iconSize: [size, size],
                iconAnchor: [size/2, size/2]
            });
        }

        function loadRegion(region) {
            currentRegion = region;
            var data = REGION_DATA[region];
            if (!data) return;

            // Clear markers
            markers.forEach(function(m) { map.removeLayer(m); });
            markers = [];
            targets = [];

            map.setView(data.center, data.zoom);

            // Cities
            if (data.cities) {
                data.cities.forEach(function(c) {
                    var m = L.marker([c.lat, c.lon], {icon: createIcon('#00f0ff', 10)}).addTo(map).bindPopup(c.name);
                    markers.push(m);
                });
            }

            // Ports
            if (data.ports) {
                data.ports.forEach(function(p) {
                    var m = L.marker([p.lat, p.lon], {icon: createIcon('#ffaa00', 8)}).addTo(map).bindPopup(p.name);
                    markers.push(m);
                });
            }

            // Bots
            if (data.bots) {
                data.bots.forEach(function(b) {
                    var m = L.marker([b.lat, b.lon], {icon: createIcon('#32cd32', 8)}).addTo(map);
                    markers.push(m);
                });
            }

            // Pods
            if (data.pods) {
                data.pods.forEach(function(p) {
                    var m = L.marker([p.lat, p.lon], {icon: createIcon('#00bfff', 8)}).addTo(map);
                    markers.push(m);
                });
            }

            // Drones
            if (data.drones) {
                data.drones.forEach(function(d) {
                    var m = L.marker([d.lat, d.lon], {icon: createIcon('#ff9500', 6)}).addTo(map);
                    markers.push(m);
                });
            }

            // Targets
            if (data.targets) {
                data.targets.forEach(function(t) {
                    var m = L.marker([t.lat, t.lon], {icon: createIcon('#ff3232', 12)}).addTo(map);
                    markers.push(m);
                    targets.push({marker: m, name: t.name, lat: t.lat, lon: t.lon});
                });
            }

            updateStats();
        }

        function updateStats() {
            var data = REGION_DATA[currentRegion];
            if (!data) return;
            document.getElementById('drone-count').textContent = data.drones ? data.drones.length : 0;
            document.getElementById('pod-count').textContent = data.pods ? data.pods.length : 0;
            document.getElementById('bot-count').textContent = data.bots ? data.bots.length : 0;
            document.getElementById('target-count').textContent = data.targets ? data.targets.length : 0;
            var total = (data.drones?data.drones.length:0) + (data.pods?data.pods.length:0) + (data.bots?data.bots.length:0);
            document.getElementById('units').textContent = total;
        }

        // Events
        document.getElementById('btn-india').onclick = function() {
            document.getElementById('btn-india').className = 'btn active';
            document.getElementById('btn-ocean').className = 'btn';
            loadRegion('india');
        };
        document.getElementById('btn-ocean').onclick = function() {
            document.getElementById('btn-india').className = 'btn';
            document.getElementById('btn-ocean').className = 'btn active';
            loadRegion('ocean');
        };

        document.getElementById('attack-btn').onclick = function() {
            targetHealth = Math.max(0, targetHealth - 25);
            document.getElementById('health-fill').style.width = targetHealth + '%';
            if (targetHealth <= 0) {
                setTimeout(function() {
                    targetHealth = 100;
                    document.getElementById('health-fill').style.width = '100%';
                }, 2000);
            }
        };

        // Mouse move
        map.on('mousemove', function(e) {
            document.getElementById('coords').textContent = 'LAT: ' + e.latlng.lat.toFixed(1) + '° | LON: ' + e.latlng.lng.toFixed(1) + '°';
        });

        // Animation
        setInterval(function() {
            document.getElementById('fps').textContent = Math.round(55 + Math.random() * 10);
        }, 500);

        // Load India
        loadRegion('india');
    </script>
</body>
</html>
